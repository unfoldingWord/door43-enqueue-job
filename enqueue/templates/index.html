<!DOCTYPE html>
<html>
  <head>
  <title>tX Pipeline Queue Status</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="../static/my-style.css" /> 
  <script src="../static/status.js"></script>
  </head>
  <body>
    <div id="status-container">
      <h1>tX Pipeline Job Status</h1>
      <form id="queue-form">
          <b>Payload:</b><br/><textarea id="payload" rows="5" cols="50">{{payload}}</textarea>
          <br/>
          <b>DCS_event:</b> <input type="text" id="dcs-event" value="push" />
          <input type="button" value="Queue Job" onClick="queueJob()"/>
          <br />
          <hr />
      </form>
      <div id="status-message"><b>To Start: Enter filter criteria (optional) and click "GO!"</b></div>
      <hr />
      <form id="filter-form">
          <b>Filter:</b>
          Repo: <input type="text" id="repo" value="{{repo}}" />
          Ref: <input type="text" id="ref" value="{{ref}}" />
          Event: <input type="text" id="event" value="{{event}}" />
          Job ID: <input type="text" id="job-id" value="{{job_id}}" />
        <br/>
        <input type="checkbox" id="show-canceled" checked /> <label for="show-canceled">Show canceled</label>
          <br/>
          <input type="button" name="filter" value="GO!" onClick="filterTable()"/>
          <input type="button" name="clear" value="Clear" onClick="(()=>{$('#repo').val('');$('#ref').val('');$('#event').val('');$('#job-id').val('');filterTable()})()"/>
          <div id="loading" class="spinner-border spinner-border-sm" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
      </form>
      <hr/>
      <br/>
      <div class="float-end">Refresh every <input type="text" id="refresh" value="10" size="3" /> seconds</div>
      <div id="status-results" style="clear:both">
        <div id="status-table"></div>
     </div>
    </div>
  </body>
</html>